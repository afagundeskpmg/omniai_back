@{
    var _claims = User.Identity as System.Security.Claims.ClaimsIdentity;
}
@using Dominio.Entidades
@using System.Globalization;


<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="KRAST, KPMG, monitoramento, portal kpmg" />
    <meta name="description" content="KRAST" />
    <meta name="robots" content="noindex,nofollow" />

    <title>KRAST | Módulo Analítico</title>

    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="~/images/favicon.ico" />

    <!-- Custom CSS -->
    <link href="~/css/style.min.css" rel="stylesheet" />
    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/shared.js"></script>
    <link href="~/css/shared.css" rel="stylesheet" />
    <link href="~/css/select2/dist/css/select2.min.css" rel="stylesheet" />
    <link href="~/extra-libs/c3/c3.min.css" rel="stylesheet" />
</head>

<body>
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>
    <div id="main-wrapper">
        <header class="topbar">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header">
                    <!-- This is for the sidebar toggle which is visible on mobile only -->
                    <a class="nav-toggler d-block d-md-none"
                       href="javascript:void(0)">
                        <i class="ri-close-line fs-6 ri-menu-2-line"></i>
                    </a>
                    <!-- -------------------------------------------------------------- -->
                    <!-- Logo -->
                    <!-- -------------------------------------------------------------- -->
                    <a class="navbar-brand" href="@Url.Action("Index", "Home")">
                        <!-- Logo icon -->
                        <b class="logo-icon">
                            <!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
                            <!-- Dark Logo icon -->
                            <img src="~/images/logo/logo-transp-azul.png" alt="homepage" class="dark-logo" width="50" />
                            <!-- Light Logo icon -->
                            <img src="~/images/logo/KPMG_NoCP_White.png" alt="homepage" class="light-logo" width="50" />

                        </b>
                        <!--End Logo icon -->
                        <!-- Logo text -->
                        <span class="logo-text" style="line-height:18px!important">
                            <b class="logo-icon" style="padding-top: 20px; padding-left: 60px">
                                KRAST
                                <span style="font-size: 9px; float: left; margin-left: 40px">Módulo Analítico</span>
                            </b>
                        </span>
                    </a>
                    <!-- -------------------------------------------------------------- -->
                    <!-- End Logo -->
                    <!-- -------------------------------------------------------------- -->
                    <!-- -------------------------------------------------------------- -->
                    <!-- Toggle which is visible on mobile only -->
                    <!-- -------------------------------------------------------------- -->
                    <a class="topbartoggler d-block d-md-none waves-effect waves-light" href="javascript:void(0)" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="ri-more-line fs-6"></i>
                    </a>
                </div>
                <!-- -------------------------------------------------------------- -->
                <!-- End Logo -->
                <!-- -------------------------------------------------------------- -->
                <div class="navbar-collapse collapse" id="navbarSupportedContent">
                    <!-- -------------------------------------------------------------- -->
                    <!-- toggle and nav items -->
                    <!-- -------------------------------------------------------------- -->
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item d-none d-md-block">
                            <a class="nav-link sidebartoggler waves-effect waves-light"
                               href="javascript:void(0)"
                               data-sidebartype="mini-sidebar">
                                <i data-feather="menu" class="feather-sm"></i>
                            </a>
                        </li>

                    </ul>
                    <!-- -------------------------------------------------------------- -->
                    <!-- Right side toggle and nav items -->
                    <!-- -------------------------------------------------------------- -->
                    <ul class="navbar-nav">
                        <li class="nav-item dropdown">
                            <div class="nav-link dropdown-toggle waves-effect waves-dark" href="" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Créditos">
                                <button type="button" class="btn waves-effect waves-light btn-rounded btn-outline-secondary" id="btn-nav-creditos">
                                    c
                                    <span class="spn-saldo-creditos" style="font-weight:bold;font-size:17px">
                                        <div class="spinner-border spinner-border-sm" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </span>
                                </button>
                            </div>                            
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                @{
                                    switch (CultureInfo.CurrentCulture.Name)
                                    {
                                        case "en-US":
                                            <i class="flag-icon flag-icon-us"></i>
                                            break;
                                        case "pt-BR":
                                            <i class="flag-icon flag-icon-br"></i>
                                            break;
                                        case "es-ES":
                                            <i class="flag-icon flag-icon-es"></i>
                                            break;
                                    }
                                }
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-animate-up" aria-labelledby="navbarDropdown2">
                                <a class="dropdown-item" href="#" onclick="AlterarIdioma('en-US');"><i class="flag-icon flag-icon-us"></i> @Multilingua.LabelsPropriedades.LabelsPropriedades.Ingles</a>
                                <a class="dropdown-item" href="#" onclick="AlterarIdioma('pt-BR');"><i class="flag-icon flag-icon-br"></i> @Multilingua.LabelsPropriedades.LabelsPropriedades.Portugues</a>
                                <a class="dropdown-item" href="#" onclick="AlterarIdioma('es-ES');"><i class="flag-icon flag-icon-es"></i> @Multilingua.LabelsPropriedades.LabelsPropriedades.Espanhol</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link waves-effect waves-dark" href="javascript:$('#btn-customize').click()" role="button">
                                <i data-feather="settings" class="feather-sm fa fa-spin" style="color:#e7e7e7"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <aside class="left-sidebar">
            <!-- Sidebar scroll-->
            <div class="scroll-sidebar">
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav">
                    <ul id="sidebarnav">
                        <li>
                            <div class="user-profile d-flex no-block dropdown mt-3">
                                <div class="user-pic">
                                    <img src="~/images/avatar/AvatarPerfilUsuario.png" alt="users"
                                         class="rounded-circle"
                                         width="40" />
                                </div>
                                <div class="user-content hide-menu ms-2">
                                    <a href="#" class="" id="Userdd" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <h5 class="mb-0 user-name font-medium">
                                            @ViewBag.UsuarioNome
                                            <i data-feather="chevron-down" class="feather-sm"></i>
                                        </h5>
                                        <span class="op-5 user-email">@ViewBag.UsuarioEmail</span>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="Userdd">
                                        <a class="dropdown-item" href="javascript:document.getElementById('logoutForm').submit()">
                                            <i data-feather="log-out" class="feather-sm text-danger me-1"></i>
                                            @Multilingua.Acoes.Acoes.Sair
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="@Url.Action("IndicadorContratoListar", "Ambiente", new { Id = ViewBag.AmbienteId })" aria-expanded="false">
                                <i class="mdi mdi-library-books"></i>
                                <span class="hide-menu">Contrato de Indicadores</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="@Url.Action("Listar", "Credito", new { Id = ViewBag.AmbienteId })" aria-expanded="false">
                                <i class="mdi mdi-coin"></i>
                                <span class="hide-menu">Meus Créditos</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="@Url.Action("Listar", "Projeto", new { AmbienteId = ViewBag.AmbienteId })" aria-expanded="false">
                                <i class="mdi mdi-cards-playing-outline"></i>
                                <span class="hide-menu">@Multilingua.LabelsPropriedades.LabelsPropriedades.Projetos</span>
                            </a>
                        </li>

                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="javascript:document.getElementById('logoutForm').submit()" aria-expanded="false">
                                <i class="mdi mdi-logout"></i>
                                <span class="hide-menu">@Multilingua.Acoes.Acoes.Sair</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            @using (Html.BeginForm("Logout", "Autenticacao", FormMethod.Post, new { id = "logoutForm" }))
            {

            }
        </aside>


        <div class="page-wrapper" style="">
            <div class="container-fluid">
                @RenderBody()
            </div>
        </div>

        <aside class="customizer">
            <a href="javascript:(0)" class="service-panel-toggle" style="display:none" id="btn-customize"></a>
            <div class="customizer-body">
                <ul class="nav customizer-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">
                            <i class="ri-tools-fill fs-6"></i>
                        </a>
                    </li>
                </ul>
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active"
                         id="pills-home"
                         role="tabpanel"
                         aria-labelledby="pills-home-tab">
                        <div class="p-3 border-bottom">
                            <!-- Sidebar -->
                            <div class="form-check mt-2">
                                <input type="checkbox" class="form-check-input" name="theme-view" id="theme-view" />
                                <label class="form-check-label" for="theme-view">Dark Theme</label>
                            </div>
                        </div>

                        <div class="p-3 border-bottom">
                            <!-- Navbar BG -->
                            <h5 class="font-medium mb-2 mt-2">@Multilingua.LabelsPropriedades.LabelsPropriedades.CorBarraSuperior</h5>
                            <ul class="theme-color">
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin1', @((int)AlteracaoCoresTipoEnum.BarraSuperior))" class="theme-link" data-navbarbg="skin1"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin2', @((int)AlteracaoCoresTipoEnum.BarraSuperior))" class="theme-link" data-navbarbg="skin2"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin3', @((int)AlteracaoCoresTipoEnum.BarraSuperior))" class="theme-link" data-navbarbg="skin3"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin4', @((int)AlteracaoCoresTipoEnum.BarraSuperior))" class="theme-link" data-navbarbg="skin4"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin5', @((int)AlteracaoCoresTipoEnum.BarraSuperior))" class="theme-link" data-navbarbg="skin5"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin6', @((int)AlteracaoCoresTipoEnum.BarraSuperior))" class="theme-link" data-navbarbg="skin6"></a>
                                </li>
                            </ul>
                            <!-- Navbar BG -->

                        </div>
                        <div class="p-3 border-bottom">
                            <!-- Logo BG -->
                            <h5 class="font-medium mb-2 mt-2">@Multilingua.LabelsPropriedades.LabelsPropriedades.CorBarraLateral</h5>
                            <ul class="theme-color">
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin1', @((int)AlteracaoCoresTipoEnum.BarraLateral))" class="theme-link" data-sidebarbg="skin1"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin2', @((int)AlteracaoCoresTipoEnum.BarraLateral))" class="theme-link" data-sidebarbg="skin2"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin3', @((int)AlteracaoCoresTipoEnum.BarraLateral))" class="theme-link" data-sidebarbg="skin3"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin4', @((int)AlteracaoCoresTipoEnum.BarraLateral))" class="theme-link" data-sidebarbg="skin4"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin5', @((int)AlteracaoCoresTipoEnum.BarraLateral))" class="theme-link" data-sidebarbg="skin5"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin6', @((int)AlteracaoCoresTipoEnum.BarraLateral))" class="theme-link" data-sidebarbg="skin6"></a>
                                </li>
                            </ul>
                            <!-- Logo BG -->
                        </div>
                        <div class="p-3 border-bottom" style="display:none">
                            <!-- Logo BG -->
                            <h5 class="font-medium mb-2 mt-2">@Multilingua.LabelsPropriedades.LabelsPropriedades.CorComponentes</h5>
                            <ul class="theme-color">
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin1', @((int)AlteracaoCoresTipoEnum.Componentes))" class="theme-link" data-sidebarbg="skin1"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin2', @((int)AlteracaoCoresTipoEnum.Componentes))" class="theme-link" data-sidebarbg="skin2"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin3', @((int)AlteracaoCoresTipoEnum.Componentes))" class="theme-link" data-sidebarbg="skin3"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin4', @((int)AlteracaoCoresTipoEnum.Componentes))" class="theme-link" data-sidebarbg="skin4"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin5', @((int)AlteracaoCoresTipoEnum.Componentes))" class="theme-link" data-sidebarbg="skin5"></a>
                                </li>
                                <li class="theme-item">
                                    <a href="javascript:AlterarTema('skin6', @((int)AlteracaoCoresTipoEnum.Componentes))" class="theme-link" data-sidebarbg="skin6"></a>
                                </li>
                            </ul>
                            <!-- Logo BG -->
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <footer class="footer text-center">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="wrap">
                        <p>
                            ©@DateTime.Now.Year KPMG Assessores, uma sociedade simples brasileira e firma-membro da rede KPMG de firmas-membro independentes e afiliadas à KPMG International Cooperative (“KPMG International”), uma entidade suíça. Todos os direitos reservados.
                            &nbsp;<a href="mailto:email@kpmg.com.br">@Multilingua.LabelsPropriedades.LabelsPropriedades.ContateNos</a> <br />
                            <a href="https://home.kpmg/br/pt/home/misc/legal.html">Legal</a> | <a href="https://home.kpmg/br/pt/home/misc/privacy2.html">Privacy</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    @Html.Partial("_ModalAnexo", new Web.ViewModel.AnexoViewModel())    
</body>

</html>

<link href="~/libs/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />
<link href="~/libs/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css" rel="stylesheet" />
<link href="~/libs/toastr/build/toastr.min.css" rel="stylesheet" />
<link href="~/css/icons/themify-icons/themify-icons.css" rel="stylesheet" />

<link href="~/css/datatable/dataTables.bootstrap4.min.css" rel="stylesheet" />
<link href="~/css/datatable/responsive.dataTables.min.css" rel="stylesheet" />
<link href="~/css/datatable/buttons.dataTables.min.css" rel="stylesheet" />
<link href="~/css/datatable/dataTables.tableTools.css" rel="stylesheet" />
<link href="~/css/datatable/responsive.dataTables.min.css" rel="stylesheet" />
<link href="~/css/datatable/rowReorder.dataTables.min.css" rel="stylesheet" />

<link href="~/css/datetime/default.css" rel="stylesheet" />
<link href="~/css/datetime/default.date.css" rel="stylesheet" />
<link href="~/css/datetime/default.time.css" rel="stylesheet" />

<link href="~/libs/nouislider/distribute/nouislider.min.css" rel="stylesheet">
<link href="~/extra-libs/nouislider/palette-noui.css" rel="stylesheet">

<link href="~/extra-libs/jvector/jquery-jvectormap-2.0.2.css" rel="stylesheet" />
<link href="~/libs/footable/css/footable.core.min.css" rel="stylesheet" />
<link href="~/css/datepicker/bootstrap-datepicker3.css" rel="stylesheet" />
<script src="~/libs/nouislider/distribute/nouislider.min.js"></script>
<script src="~/libs/wnumb/wNumb.js"></script>

<script src="~/libs/block-ui/jquery.blockUI.js"></script>

<!-- Bootstrap tether Core JavaScript -->
<script src="~/libs/popper.js/dist/umd/popper.min.js"></script>
<script src="~/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<!-- apps -->
<script src="~/dist/js/app.min.js"></script>
<script src="~/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
<script src="~/extra-libs/sparkline/sparkline.js"></script>
<script src="~/dist/js/waves.js"></script>
<script src="~/dist/js/sidebarmenu.js"></script>
<script src="~/dist/js/feather.min.js"></script>
<script src="~/dist/js/custom.min.js"></script>
<script src="~/libs/bootstrap/dist/js/promise.min.js"></script>

<script src="~/libs/sweetalert2/dist/sweetalert2.all.min.js"></script>
<script src="~/libs/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/libs/jquery-validation/dist/jquery.validate.unobtrusive.min.js"></script>
<script src="~/libs/footable/dist/footable.all.min.js"></script>
<script src="~/libs/toastr/build/toastr.min.js"></script>

<script src="~/js/datatable/jquery.dataTables.min.js"></script>
<script src="~/js/datatable/dataTables.tableTools.js"></script>
<script src="~/js/datatable/dataTables.bootstrap.min.js"></script>
<script src="~/js/datatable/buttons.html5.min.js"></script>
<script src="~/js/datatable/dataTables.buttons.min.js"></script>
<script src="~/js/datatable/jszip.min.js"></script>
<script src="~/js/datatable/pdfmake.min.js"></script>
<script src="~/js/datatable/vfs_fonts.js"></script>
<script src="~/js/datatable/buttons.colVis.min.js"></script>
<script src="~/js/datatable/buttons.print.min.js"></script>
<script src="~/js/datatable/buttons.bootstrap4.min.js"></script>
<script src="~/js/datatable/dataTables.bootstrap4.min.js"></script>
<script src="~/js/datatable/dataTables.rowReorder.min.js"></script>
<script src="~/js/datatable/dataTables.responsive.min.js"></script>

<script src="~/js/datetime/picker.js"></script>
<script src="~/js/datetime/picker.date.js"></script>
<script src="~/js/datetime/picker.time.js"></script>
<script src="~/js/datepicker/bootstrap-datepicker.min.js"></script>
<script src="~/js/datepicker/bootstrap-datepicker.pt-BR.js"></script>
<script src="~/js/datepicker/bootstrap-datepicker.en-US.min.js"></script>
<script src="~/js/datepicker/bootstrap-datepicker.es-ES.min.js"></script>

<script src="~/js/mask/jquery.mask.js"></script>

<script src="~/js/select2/dist/js/select2.min.js"></script>
<link href="~/css/select2/dist/css/select2-bootstrap.min.css" rel="stylesheet" />

<script src="~/extra-libs/c3/d3.min.js"></script>
<script src="~/extra-libs/c3/c3.min.js"></script>

<script>
    $(document).ready(function () {
        ConfigurarTema(@(ViewBag.DarkMode ?? "false"), '@ViewBag.LogoBg', '@ViewBag.NavbarBg', '@ViewBag.SidebarColor', '');

        $("#theme-view").change(function () {
            RequestGET(true, `@(Url.RouteUrl("RotaAPI", new { controller = "Usuario", action = "AlterarDarkMode" }))?ativar=${$(this).is(":checked")}`, AfterAlterarTema);
        });

        $('.calendario').datepicker({
            forceParse: false,
            language: '@CultureInfo.CurrentCulture.Name',
            autoclose: true
        });

        $('.modal').modal({ backdrop: 'static', keyboard: false });
        AtualizarCreditosNavbar();
    });

    function AlterarTema(skin, tipo) {
        RequestGET(true, `@(Url.RouteUrl("RotaAPI", new { controller = "Usuario", action = "AlterarTema" }))?skin=${skin}&tipo=${tipo}`, AfterAlterarTema);
    }

    function AfterAlterarTema(resultado) {
        if (!resultado.Sucesso)
            swal('', HtmlEncode(resultado.Mensagem));
        else {
            AlterarCoresTemplate(resultado.Retorno.DarkMode, resultado.Retorno.LogoBg, resultado.Retorno.NavbarBg, resultado.Retorno.SidebarColor, resultado.Retorno.Components);
            toastr.clear();
            toastr.success('@Multilingua.AlertasNotificacoes.AlertasNotificacoes.Sucesso');
        }
    }

    function ConfigurarTema(darkmode, logobg, navbarbg, sidebarcolor, components) {
        $("#main-wrapper").AdminSettings({
            Theme: darkmode,
            Layout: 'vertical',
            LogoBg: logobg,
            NavbarBg: navbarbg,
            SidebarType: 'mini-sidebar',
            SidebarColor: sidebarcolor,
            SidebarPosition: true,
            HeaderPosition: true,
            BoxedLayout: false
        });
        AlternarDarkModeFonte(darkmode);
    }

    function AlterarCoresTemplate(darkmode, logobg, navbarbg, sidebarcolor, components) {
        $(".topbar .top-navbar .navbar-header").attr("data-logobg", logobg);
        $("#main-wrapper").attr("data-navbarbg", navbarbg);
        $(".topbar").attr("data-navbarbg", navbarbg);
        $(".topbar .navbar-collapse").attr("data-navbarbg", navbarbg);
        $(".left-sidebar").attr("data-sidebarbg", sidebarcolor);
        AlternarDarkModeFonte(darkmode);
    }

    function AlternarDarkModeFonte(darkmode) {
        if (darkmode)
            $("body").attr("data-theme", "dark");
        else
            $("body").attr("data-theme", "light");

        if ($("#main-wrapper").attr("data-navbarbg") == "skin6") {
            $(".topbar .navbar").addClass("navbar-light");
            $(".topbar .navbar").removeClass("navbar-dark");
        } else {
            $(".topbar .navbar").removeClass("navbar-light");
            $(".topbar .navbar").addClass("navbar-dark");
        }
    }
</script>